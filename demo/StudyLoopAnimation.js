(()=>{"use strict";var e,t={6602:(e,t,n)=>{var i=n(8694),r=n(6075);class a extends r.Group{constructor(e,t,n){super(),this.updatePlane=()=>{this.plane.coplanarPoint(this.planeObject.position),this.planeObject.lookAt(this.planeObject.position.x-this.plane.normal.x,this.planeObject.position.y-this.plane.normal.y,this.planeObject.position.z-this.plane.normal.z)},n=class{static init(e,t){return null==e&&(e={}),null!=e.allPlanes&&0!==e.allPlanes.length||(e.allPlanes=[t]),null==e.visibleSurface&&(e.visibleSurface=!1),e}}.init(n,e),this.plane=e;const i=n.allPlanes.indexOf(e);this.stencilGroup=l.createPlaneStencilGroup(t,e,i+1),this.add(this.stencilGroup),this.planeObject=a.createPlane(t,e,n.allPlanes,i,n.planeMaterial),this.planeObject.onBeforeRender=this.updatePlane,this.add(this.planeObject),this.frontFace=l.initFrontFaceMesh(n.allPlanes,t,n.frontFaceMaterial),this.stencilGroup.add(this.frontFace),this.frontFace.visible=n.visibleSurface}static createPlane(e,t,n,i,a){e.computeBoundingSphere();const o=e.boundingSphere.radius,s=new r.PlaneGeometry(2*o,2*o);null==a&&(a=new r.MeshStandardMaterial({color:15277667,metalness:.1,roughness:.75})),l.overrideStencilMaterial(a,t,n);const c=new r.Mesh(s,a);return c.onAfterRender=function(e){e.clearStencil()},c.renderOrder=i+1.1,c}get rotation(){return this.stencilGroup.rotation}set rotation(e){this.stencilGroup.rotation.copy(e)}}class l{static createPlaneStencilGroup(e,t,n){const i=new r.Group,a=new r.MeshBasicMaterial;a.depthWrite=!1,a.depthTest=!1,a.colorWrite=!1,a.stencilWrite=!0,a.stencilFunc=r.AlwaysStencilFunc;const l=new r.Mesh(e,this.getStencilMat(a,r.BackSide,t,r.IncrementWrapStencilOp));l.renderOrder=n,i.add(l);const o=new r.Mesh(e,this.getStencilMat(a,r.FrontSide,t,r.DecrementWrapStencilOp));return o.renderOrder=n,i.add(o),i}static setStencilOp(e,t){e.stencilFail=t,e.stencilZFail=t,e.stencilZPass=t}static getStencilMat(e,t,n,i){const r=e.clone();return r.side=t,r.clippingPlanes=[n],l.setStencilOp(r,i),r}static overrideStencilMaterial(e,t,n){e.clippingPlanes=n.filter((e=>e!==t)),e.stencilWrite=!0,e.stencilRef=0,e.stencilFunc=r.NotEqualStencilFunc,l.setStencilOp(e,r.ReplaceStencilOp)}static initFrontFaceMesh(e,t,n){null==n&&(n=new r.MeshStandardMaterial({color:16761095,metalness:.1,roughness:.75})),this.overrideFrontFaceMaterial(n,e);const i=new r.Mesh(t,n);return i.renderOrder=2*e.length,i}static overrideFrontFaceMaterial(e,t){e.clippingPlanes=t}}var o=n(8012);class s{static initScene(){return new r.Scene}static initLight(e){const t=new r.AmbientLight(16777215,1);return e.add(t),t}static initCamera(e,t,n,i=1,a=400){const l=new r.PerspectiveCamera(45,t/n,i,a);return l.position.set(0,0,100),l.updateMatrixWorld(!1),e.add(l),l}static initControl(e,t){let n;t&&(n=t.domElement);const i=new o.z(e,n);return i.update(),i}static initRenderer(e,t,n=0,i="webgl-canvas",a=!0){const l=new r.WebGLRenderer({canvas:document.getElementById(i),antialias:a});return l.setClearColor(new r.Color(n)),l.setSize(e,t),l.setPixelRatio(window.devicePixelRatio),l}static initHelper(e){const t=new r.AxesHelper(30);e.add(t)}static render(e,t,n,i,r){const a=()=>{r&&r(),e.update(),t.render(n,i),requestAnimationFrame(a)};a()}static addRendererInfo(){const e=document.createElement("div");return document.body.appendChild(e),e}static updateRendererInfo(e,t){e.innerText=JSON.stringify(t)}}class c{static initColorGUI(e,t,n="color"){const i={},r=t[n];i[n]=r.getHex(),e.addColor(i,n).onChange((e=>{r.setHex(e)}))}static initMaterialGUI(e,t,n="Material"){const i=e.addFolder(n);return this.initMaterialFolder(i,t),t.hasOwnProperty("emissive")&&this.initColorGUI(i,t,"emissive"),i.open(),i}static initMaterialFolder(e,t){this.initColorGUI(e,t),e.add(t,"transparent"),e.add(t,"opacity",0,1)}}class d{constructor(){const e=s.initScene();e.fog=new r.Fog(0,160,320),s.initLight(e);const t=s.initCamera(e,d.W,d.H),n=s.initRenderer(d.W,d.H);n.localClippingEnabled=!0;const i=s.initControl(t,n),a=this.initObject(e);this.initGUI(a),s.render(i,n,e,t,(()=>{a.rotation.x+=.03,a.updatePlane()}))}initObject(e){const t=new r.PointLight(16777215,3,0,2);t.position.set(10,20,30),e.add(t);const n=new r.PointLightHelper(t);e.add(n);const i=new r.TorusKnotGeometry(10,3,64,32),l=new r.Plane(new r.Vector3(0,0,-1),0),o=new a(l,i,{planeMaterial:new r.MeshBasicMaterial({color:new r.Color(16777215)})});return e.add(o),o}initGUI(e){const t=new i.XS;c.initMaterialGUI(t,e.planeObject.material,"Clipping Surface"),c.initMaterialGUI(t,e.frontFace.material,"FrontFace").add(e.frontFace,"visible")}}d.W=640,d.H=480,window.onload=()=>{new d}}},n={};function i(e){var r=n[e];if(void 0!==r)return r.exports;var a=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.loaded=!0,a.exports}i.m=t,e=[],i.O=(t,n,r,a)=>{if(!n){var l=1/0;for(d=0;d<e.length;d++){for(var[n,r,a]=e[d],o=!0,s=0;s<n.length;s++)(!1&a||l>=a)&&Object.keys(i.O).every((e=>i.O[e](n[s])))?n.splice(s--,1):(o=!1,a<l&&(l=a));if(o){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[n,r,a]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),i.j=198,(()=>{var e={198:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var r,a,[l,o,s]=n,c=0;if(l.some((t=>0!==e[t]))){for(r in o)i.o(o,r)&&(i.m[r]=o[r]);if(s)var d=s(i)}for(t&&t(n);c<l.length;c++)a=l[c],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return i.O(d)},n=self.webpackChunkthreejs_lab=self.webpackChunkthreejs_lab||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=i.O(void 0,[736],(()=>i(6602)));r=i.O(r)})();