!function(e){function t(t){for(var i,a,o=t[0],l=t[1],d=t[2],u=0,c=[];u<o.length;u++)a=o[u],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&c.push(n[a][0]),n[a]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);for(h&&h(t);c.length;)c.shift()();return r.push.apply(r,d||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],i=!0,o=1;o<s.length;o++){var l=s[o];0!==n[l]&&(i=!1)}i&&(r.splice(t--,1),e=a(a.s=s[0]))}return e}var i={},n={2:0},r=[];function a(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=e,a.c=i,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(s,i,function(t){return e[t]}.bind(null,i));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var o=window.webpackJsonp=window.webpackJsonp||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var d=0;d<o.length;d++)t(o[d]);var h=l;r.push([35,0]),s()}({1:function(e,t,s){"use strict";s.d(t,"a",function(){return r});var i=s(0),n=s(4);class r{static initScene(){return new i.Scene}static initLight(e){const t=new i.AmbientLight(16777215,1);return e.add(t),t}static initCamera(e,t,s,n=1,r=400){const a=new i.PerspectiveCamera(45,t/s,n,r);return a.position.set(0,0,100),a.updateMatrixWorld(!1),e.add(a),a}static initControl(e,t){let s;t&&(s=t.domElement);const i=new n.a(e,s);return i.update(),i}static initRenderer(e,t,s=0,n="webgl-canvas",r=!0){const a=new i.WebGLRenderer({canvas:document.getElementById(n),antialias:r});return a.setClearColor(new i.Color(s)),a.setSize(e,t),a.setPixelRatio(window.devicePixelRatio),a}static initHelper(e){const t=new i.AxesHelper(30);e.add(t)}static render(e,t,s,i,n){const r=()=>{n&&n(),e.update(),t.render(s,i),requestAnimationFrame(r)};r()}}},10:function(e,t,s){"use strict";s.d(t,"a",function(){return a});var i=s(0),n=s(11),r=s(9);class a{constructor(e,t,s){this.composers=[],this.onRequestAnimationFrame=e=>{null==this.lastUpdateTimestamp&&(this.lastUpdateTimestamp=e);const t=e-this.lastUpdateTimestamp;this.onBeforeRequestAnimationFrame&&this.onBeforeRequestAnimationFrame(e),this.render(t),this.lastUpdateTimestamp=e,this.id=requestAnimationFrame(this.onRequestAnimationFrame)},this.renderer=s,this.scene=e,this.camera=t}getRenderPass(){return new n.a(this.scene,this.camera,void 0,void 0,void 0)}initComposer(e,t){const s=this.getRenderPass(),i=new r.a(t);return i.addPass(s),e.forEach(e=>{i.addPass(e)}),this.composers.push(i),i}start(){null==this.id&&(this.id=requestAnimationFrame(this.onRequestAnimationFrame))}stop(){null!=this.id&&(cancelAnimationFrame(this.id),this.lastUpdateTimestamp=null)}setSize(e,t){this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(e,t),this.composers.forEach(s=>{s.setSize(e,t)})}getSize(){return this.renderer.getSize(new i.Vector2)}render(e){this.composers.forEach(t=>{t.render(e)})}}},13:function(e,t,s){"use strict";s.d(t,"a",function(){return a});var i=s(8),n=s(16),r=s(0);class a extends i.a{constructor(e){super(n.a),this.renderer=e,this.updateSize()}updateSize(){const e=this.renderer.getSize(new r.Vector2),t=this.renderer.getPixelRatio();this.setSize(e.width*t,e.height*t)}setSize(e,t){super.setSize(e,t);const s=this.material.uniforms;s.resolution.value.x=1/e,s.resolution.value.y=1/t}}},19:function(e,t){e.exports="uniform sampler2D baseTexture;\nuniform sampler2D bloomTexture;\nvarying vec2 vUv;\nvec4 getTexture( sampler2D texture ) {\n    return mapTexelToLinear( texture2D( texture , vUv ) );\n}\nvoid main() {\n    gl_FragColor = ( getTexture( baseTexture ) + vec4( 1.0 ) * getTexture( bloomTexture ) );\n}"},20:function(e,t){e.exports="varying vec2 vUv;\nvoid main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}"},35:function(e,t,s){"use strict";s.r(t);var i=s(0),n=s(1),r=s(9),a=s(27);class o extends r.a{constructor(e,t){super(e);const s=e.getSize(new i.Vector2);this.bloomPass=new a.a(s,1.5,.4,.4),this.renderToScreen=!1,this.addPass(t),this.addPass(this.bloomPass)}}var l=s(17),d=s(8),h=s(19),u=s.n(h),c=s(20),m=s.n(c);class p extends d.a{constructor(e){super(new i.ShaderMaterial({uniforms:{baseTexture:{value:null},bloomTexture:{value:e.renderTarget2.texture}},vertexShader:m.a,fragmentShader:u.a,defines:{}}),p.TEXTURE_ID),this.needsSwap=!0}}p.TEXTURE_ID="baseTexture";var g=s(13),b=s(7);class f extends r.a{constructor(e,t,s){super(e),this.addPass(t),this.addPass(new p(s)),this.fxaaPass=new g.a(e),this.addPass(this.fxaaPass);const n=e.getSize(new i.Vector2);this.smaaPass=new l.a(n.width,n.height),this.addPass(this.smaaPass),this.type=b.a.SMAA}get type(){return this._type}set type(e){this._type=e,this.smaaPass.enabled=e==b.a.SMAA,this.fxaaPass.enabled=e==b.a.FXAA}}var v=s(10);class w extends v.a{constructor(e,t,s){super(e,t,s),this.darkenNonBloomed=e=>{if(!this.isDarken(e))return;null==e.userData.materialStorage&&(e.userData.materialStorage=new x);const t=e.userData.materialStorage;t.updateMaterial(e.material),e.material=t.darken},this.restoreMaterial=e=>{this.isDarken(e)&&(e.material=e.userData.materialStorage.original)};const n=this.getRenderPass();this.layers=new i.Layers,this.layers.set(w.BLOOM),this.bloom=new o(s,n),this.mix=new f(s,n,this.bloom),this.composers=[this.bloom,this.mix]}render(e){this.scene.traverse(this.darkenNonBloomed),this.bloom.render(e),this.scene.traverse(this.restoreMaterial),this.mix.render(e)}isDarken(e){return(null!=e.isMesh||null!=e.isLine)&&!this.layers.test(e.layers)}set threshold(e){this.bloom.bloomPass.threshold=e}get threshold(){return this.bloom.bloomPass.threshold}set strength(e){this.bloom.bloomPass.strength=e}get strength(){return this.bloom.bloomPass.strength}set radius(e){e>1&&console.warn("Bloomの半径が1を超えています。1以上ではメッシュにアウトラインが発生します。",e),this.bloom.bloomPass.radius=e}get radius(){return this.bloom.bloomPass.radius}set antiAliasingType(e){this.mix.type=e}get antiAliasingType(){return this.mix.type}}w.ENTIRE=0,w.BLOOM=30;class x{updateMaterial(e){this.original=e,null==this.darken||this.darken.type!==this.original.type?this.darken=this.original.clone():this.darken.copy(this.original),null!=this.darken.color&&this.darken.color.setHex(0),null!=this.darken.shininess&&(this.darken.shininess=0),null!=this.darken.specular&&this.darken.specular.setHex(0),null!=this.darken.emissive&&this.darken.emissive.setHex(0)}}var y=s(6);s.d(t,"StudyBloom",function(){return S});class S{constructor(){const e=n.a.initScene();e.fog=new i.Fog(0,80,160),n.a.initLight(e);const t=n.a.initCamera(e,S.W,S.H),s=n.a.initRenderer(S.W,S.H),r=n.a.initControl(t,s);n.a.initHelper(e),this.initObject(e),this.bloomRenderer=new w(e,t,s),this.bloomRenderer.onBeforeRequestAnimationFrame=()=>{r.update()},this.bloomRenderer.threshold=.4,this.bloomRenderer.start(),this.initGUI()}initObject(e){const t=new i.PointLight(16777215,3,0,2);t.position.set(0,0,0),e.add(t);const s=new i.PointLightHelper(t,2,0);e.add(s);const n=new i.SphereGeometry(10,32,32),r=new i.MeshLambertMaterial({fog:void 0!==e.fog});r.color=new i.Color(16737894),this.center=new i.Mesh(n,r),this.center.layers.enable(w.BLOOM),e.add(this.center),this.satellite=new i.Mesh(n,r.clone()),this.satellite.position.set(30,0,0),e.add(this.satellite);const a=new i.Mesh(n,r);a.position.set(-30,0,0),e.add(a)}initGUI(){const e=new y.a;this.initGULBloom(e),this.initGUISatellite(e),this.initRenderGUI(e),this.initGUIResolution(e),this.initGUI_AAType(e)}initGULBloom(e){const t={bloomCenter:!0,bloomSatellite:!1},s=(e,t)=>{t?e.layers.enable(w.BLOOM):e.layers.disable(w.BLOOM)},i=e.addFolder("bloom");i.add(t,"bloomCenter").onChange(e=>{s(this.center,e)}),i.add(t,"bloomSatellite").onChange(e=>{s(this.satellite,e)}),i.open()}initGUISatellite(e){const t=e.addFolder("Satellite");t.add(this.satellite.material,"transparent"),t.add(this.satellite.material,"opacity",0,1),t.open()}initRenderGUI(e){const t=e.addFolder("renderer");t.add(this.bloomRenderer,"threshold",0,1),t.add(this.bloomRenderer,"strength",0,4),t.add(this.bloomRenderer,"radius",0,1),t.open()}initGUIResolution(e){const t=this.bloomRenderer.getSize(),s={width:t.width,height:t.height},i=()=>{this.bloomRenderer.setSize(s.width,s.height)},n=e.addFolder("Resolution");n.add(s,"width",2,1920).step(1).onChange(i),n.add(s,"height",2,1080).step(1).onChange(i),n.open()}initGUI_AAType(e){const t=e.addFolder("AA Type");t.add(this.bloomRenderer,"antiAliasingType",{None:b.a.None,FXAA:b.a.FXAA,SMAA:b.a.SMAA}),t.open()}}S.W=640,S.H=480,window.onload=()=>{new S}},7:function(e,t,s){"use strict";var i;s.d(t,"a",function(){return i}),function(e){e[e.None=0]="None",e[e.SMAA=1]="SMAA",e[e.FXAA=2]="FXAA"}(i||(i={}))}});